install.packages("gganimate")
update.packages(ask=FALSE)
install.packages("rlang")
install.packages("gganimate")
library(sf)
library(ggplot2)
library(dplyr)
library(ggthemes)
library(readxl)
library(ggspatial)
library(ggtext)
library(gganimate)
#######Load csv & xlsx
file_path <- "C:/Users/bachi/Documents/GIT_PROJECTS/Assessing-Urban-Flood-Risk-in-Dhaka-Bangladesh/data/Processed/INFORM_Sub-national Risk Index for Bangladesh_ 2022_Admin Level 3_V1.xlsx"
### Read the "INFORM Upazila" sheet
inform_upazila <- read_excel(file_path, sheet = "INFORM Upazila")
inform_upazila <- inform_upazila[-c(1:3), ]
### Read the "Hazard & Exposure" sheet
hazard_exposure <- read_excel(file_path, sheet = "Hazard & Exposure")
hazard_exposure <- hazard_exposure[-c(1:3), ]
# Filter hazard_exposure for Dhaka division
hazard_exposure_dhaka <- hazard_exposure[hazard_exposure$`ADMIN LEVEL-1\r\n(Division)` == "Dhaka", ]
# Rename columns for easier handling
names(hazard_exposure_dhaka)[names(hazard_exposure_dhaka) == "ADMIN LEVEL -3 \r\n(Upazila)"] <- "ADM3_EN"
names(hazard_exposure_dhaka)[names(hazard_exposure_dhaka) == "Flood Risk ( Riverine and Flash Flood)"] <- "flood_risk"
waterway_shapefile_path <- "C:/Users/bachi/Documents/GIT_PROJECTS/Assessing-Urban-Flood-Risk-in-Dhaka-Bangladesh/data/Raw/bangladesh-latest-free.shp/gis_osm_waterways_free_1.shp"  # Example path
water_shapefile_path <- "C:/Users/bachi/Documents/GIT_PROJECTS/Assessing-Urban-Flood-Risk-in-Dhaka-Bangladesh/data/Raw/bangladesh-latest-free.shp/gis_osm_water_a_free_1.shp"  # Example path
shapefile_path_boundari <- "C:/Users/bachi/Documents/GIT_PROJECTS/Assessing-Urban-Flood-Risk-in-Dhaka-Bangladesh/data/Raw/bgd_adm_bbs_20201113_SHP/bgd_admbnda_adm4_bbs_20201113.shp"  # Example path
#### Read the shapefile
# transport <- st_read(transport_shapefile_path)
shapefile_boundari <- st_read(shapefile_path_boundari)
shapefile_Dhaka_boundari <- shapefile_boundari[shapefile_boundari$ADM1_EN == "Dhaka", ]
water_Dhaka <- st_read("C:/Users/bachi/Documents/GIT_PROJECTS/Assessing-Urban-Flood-Risk-in-Dhaka-Bangladesh/data/Processed/water_in_dhaka.shp")
water_way_Dhaka <- st_read("C:/Users/bachi/Documents/GIT_PROJECTS/Assessing-Urban-Flood-Risk-in-Dhaka-Bangladesh/data/Processed/water_way_in_dhaka.shp")
shapefile_Dhaka_hazard_exposure <- left_join(shapefile_Dhaka_boundari, hazard_exposure_dhaka, by = "ADM3_EN")
ggplot() +
geom_sf(data = shapefile_Dhaka_hazard_exposure, aes(fill = flood_risk),
color = "white", size = 0.1) +
geom_sf(data = water_Dhaka, aes(fill = fclass), color = NA, alpha = 0.6) +
geom_sf(data = water_way_Dhaka, aes(color = fclass), size = 0.7) +
scale_fill_viridis(option = "plasma", name = "Flood Risk",
direction = -1, alpha = 0.7,
guide = guide_colorbar(order = 1)) +
scale_fill_manual(values = c("wetland" = "#8FBC8F",
"water" = "#87CEFA",
"reservoir" = "#4682B4",
"dock" = "#20B2AA",
"riverbank" = "#98FB98"),
name = "Water Bodies",
guide = guide_legend(order = 2)) +
scale_color_manual(values = c("river" = "#0077BE",
"canal" = "#40E0D0",
"stream" = "#48D1CC",
"drain" = "#5F9EA0"),
name = "Waterways",
guide = guide_legend(order = 3)) +
annotation_scale(location = "bl", width_hint = 0.3) +
annotation_north_arrow(location = "tr", which_north = "true",
pad_x = unit(0.1, "in"), pad_y = unit(0.2, "in"),
style = north_arrow_fancy_orienteering) +
labs(title = "Flood Risk and Water Features in Dhaka, Bangladesh (2022)",
subtitle = "Visualizing flood vulnerability, water bodies, and hydrological networks",
caption = "Data: INFORM Sub-national Risk Index & OpenStreetMap 2022 | Created by: Bachir S") +
theme_minimal() +
theme(
plot.title = element_text(size = 18, face = "bold", hjust = 0.5),
plot.subtitle = element_text(size = 14, hjust = 0.5, margin = margin(b = 20)),
plot.caption = element_text(size = 10, hjust = 1, margin = margin(t = 20)),
legend.position = "right",
legend.box = "vertical",
legend.margin = margin(t = 10, b = 10, l = 10, r = 10),
panel.grid.major = element_line(color = "gray90", size = 0.2),
panel.grid.minor = element_blank(),
plot.background = element_rect(fill = "white", color = NA),
panel.background = element_rect(fill = "white", color = NA)
) +
coord_sf(datum = NA)
install.packages("viridis")
library(viridis)
ggplot() +
geom_sf(data = shapefile_Dhaka_hazard_exposure, aes(fill = flood_risk),
color = "white", size = 0.1) +
geom_sf(data = water_Dhaka, aes(fill = fclass), color = NA, alpha = 0.6) +
geom_sf(data = water_way_Dhaka, aes(color = fclass), size = 0.7) +
scale_fill_viridis(option = "plasma", name = "Flood Risk",
direction = -1, alpha = 0.7,
guide = guide_colorbar(order = 1)) +
scale_fill_manual(values = c("wetland" = "#8FBC8F",
"water" = "#87CEFA",
"reservoir" = "#4682B4",
"dock" = "#20B2AA",
"riverbank" = "#98FB98"),
name = "Water Bodies",
guide = guide_legend(order = 2)) +
scale_color_manual(values = c("river" = "#0077BE",
"canal" = "#40E0D0",
"stream" = "#48D1CC",
"drain" = "#5F9EA0"),
name = "Waterways",
guide = guide_legend(order = 3)) +
annotation_scale(location = "bl", width_hint = 0.3) +
annotation_north_arrow(location = "tr", which_north = "true",
pad_x = unit(0.1, "in"), pad_y = unit(0.2, "in"),
style = north_arrow_fancy_orienteering) +
labs(title = "Flood Risk and Water Features in Dhaka, Bangladesh (2022)",
subtitle = "Visualizing flood vulnerability, water bodies, and hydrological networks",
caption = "Data: INFORM Sub-national Risk Index & OpenStreetMap 2022 | Created by: Bachir S") +
theme_minimal() +
theme(
plot.title = element_text(size = 18, face = "bold", hjust = 0.5),
plot.subtitle = element_text(size = 14, hjust = 0.5, margin = margin(b = 20)),
plot.caption = element_text(size = 10, hjust = 1, margin = margin(t = 20)),
legend.position = "right",
legend.box = "vertical",
legend.margin = margin(t = 10, b = 10, l = 10, r = 10),
panel.grid.major = element_line(color = "gray90", size = 0.2),
panel.grid.minor = element_blank(),
plot.background = element_rect(fill = "white", color = NA),
panel.background = element_rect(fill = "white", color = NA)
) +
coord_sf(datum = NA)
